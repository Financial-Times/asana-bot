<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <link rel="stylesheet" media="all" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
    <link rel="stylesheet" th:href="@{/css/report.css}"  href="../../css/report.css"/>
<head>
    <title>Reports : Criteria</title>
</head>
<body>
    <form id="reportCriteriaForm" class="form-horizontal" action="#" method="post"
          th:action="@{/reports}"
          th:object="${criteria}">

        <!-- Form Name -->
        <legend>FT Asana Report</legend>

        <!-- Validation errors -->
        <div th:if="${#fields.hasErrors('*')}"
             class="alert alert-error">
            <p th:each="error : ${#fields.errors('*')}"
               th:text="${error}">
                Validation error
            </p>
        </div>
        <!-- Report select -->
        <div class="form-group">
            <label class="control-label col-sm-2" for="reportTypeSelect">Report</label>
            <div class="col-sm-4">
                <select id="reportTypeSelect" name="reportType" class="form-control"
                        th:field="*{reportType}">
                    <option th:each="rt : ${reportTypes}" th:value="${rt}" th:text="${rt}">Report</option>
                </select>
            </div>
        </div>
        <!-- Desk select -->
        <div class="form-group">
            <label class="control-label col-sm-2" for="teamSelect">Desk</label>
            <div class="col-sm-4">
                <select id="teamSelect" name="team" class="form-control"
                        th:field="*{team}">
                    <option th:each="team : ${teams}" th:value="${team}" th:text="${team}">Team</option>
                </select>
            </div>
        </div>

        <!-- Submit -->
        <div class="control-group">
            <div class="col-sm-offset-2 col-sm-6">
                <input type="submit" id="submitButton" name="submitButton" class="btn btn-primary" value="Submit"/>
            </div>
        </div>
    </form>

    <div class="clearfix"></div>

    <div th:if="${report}" class="container-fluid printable">
        <header>
            <img src="http://im.test.ft-static.com/m/img/masthead_main.jpg" width="115px" />
            <span th:text="'Conference Report ' + ${reportDate}">today</span>
        </header>

       <div>
           <th:block th:each="tt: ${report.tagTasks}">
                <span class="tags" th:text="${tt.key}">Tag</span>
                <table id="Finserv-items" class="table table-condensed">
                    <p th:if="${#lists.isEmpty(tt.value)}" th:text="None"></p>
                    <tbody th:unless="${#lists.isEmpty(tt.value)}">
                        <tr th:each="task: ${tt.value}">
                            <td>
                                <div>
                                    <b th:text="${task.name}"></b>
                                    <span th:unless="${#lists.isEmpty(task.tags)}" th:text="${#strings.listJoin(task.tags,', ')}" class="tags_sm">Secondary tags</span>
                                </div>
                                <span th:if="${task.notes}" th:text="${task.notes}" class="notes"></span>
                                <ul>
                                    <li th:each="subtask : ${task.subtasks}">
                                        <span th:text="${subtask.name}">Subtask name</span>
                                        <span th:if="${subtask.completed}" class="complete">&#10003;</span>
                                    </li>
                                </ul>

                            </td>
                        </tr>
                    </tbody>
                </table>
           </th:block>
        </div>
    </div>

</body>
</html>